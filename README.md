# Arduino_Datalogger
Arduino system for extracting and logging data to an SD card.
By: Harry Farrell

MOTIVATION

The motivation for this project was to create a system that can log and display data from 
various sensora in a way that is simple and adaptable. The system is based on arduino hardware
and should be easy to adapt to new sensors given that they can be read from a digital or analog 
pin.

HARDWARE SYSTEM

The hardware system is a stack of arduino shields. All major hardware pieces can be unplugged, and
new shields can easily be created and added to the stack. The first layer has both a sensor input plug
and an LCD readout. The second layer is a SD card shield, which is used to store all collected data.
The SD card shield talks to the arduino through the ICSP pins, which are connected to the six extension
wires coming from the sensor input layer. Ensure that the wires are connected to the SD card shield in the
same order that they came off the sensor input layer. The top layer is a user control layer that allows the 
user to index the test data. This layer can be easily modified to fit whatever control scheme is desired. 

CODE EXPLANATION

The current system is designed to read a torque sensor, which has an analog output between 1 and 5 volts.
The system can also read an encoder from the pedal set which has 36 ticks per rotation. The arduino uses an 
interrupt to detect the rising edge of the encoder tick, and references the internal clock of the arduino to
calculate the time between each pulse. The derives the rpm using the number of ticks per rotation. The arduino
then writes the recorded data, both RPM and Torque Sensor Voltage, to the SD card inside the interrupt. The data
is written to the file that is selected via the user interface. 

CURRENT ISSUES

The most prominent unsolved problem of this system is that there are frequent spikes of the RPM that seem to be
much larger than what seems to be reasonably possible. I am unsure why I observe these spikes. If this issue cannot
be resolved, it is fairly easy to remove these readings from the data.

Wrong theories on why we get data spikes that have been tested:

- magnetic fields generated by the motor are affecting the readout of the hall effect sensor
      The encoder was tested without the motor, dataspikes still occur
- the dataspikes are caused by system bounce
      Both software and hardware debounce solutions were implemented, dataspikes still occur





